<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sri Lanka Tour Planner - Professional Booking</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #27ae60; --secondary: #2c3e50; --accent: #e67e22; --gold: #f1c40f; --bg: #f8f9fa; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg); color: var(--secondary); margin: 0; padding: 0; }
        header { background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1552423126-444a7139f37c?q=80&w=1500') no-repeat center center/cover; height: 250px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .container { max-width: 900px; margin: -50px auto 50px auto; background: white; padding: 35px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        h2 { border-left: 5px solid var(--primary); padding-left: 15px; margin: 30px 0 20px 0; font-size: 1.3rem; text-transform: uppercase; }
        
        /* Cities Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .item { cursor: pointer; border-radius: 12px; overflow: hidden; border: 3px solid #eee; transition: 0.3s; background: #fff; text-align: center; position: relative; }
        .item img { width: 100%; height: 110px; object-fit: cover; }
        .item p { margin: 8px; font-weight: 600; font-size: 0.85rem; }
        .item.selected { border-color: var(--primary); background: #f0fff4; transform: scale(1.03); }
        .item.selected::after { content: '‚úì'; position: absolute; top: 5px; right: 5px; background: var(--primary); color: white; width: 20px; height: 20px; border-radius: 50%; font-size: 12px; display: flex; align-items: center; justify-content: center; }

        /* Vehicle Selection */
        .vehicle-select { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 15px; }
        .v-card { flex: 1; min-width: 150px; padding: 20px; border: 2px solid #eee; border-radius: 15px; text-align: center; cursor: pointer; transition: 0.3s; }
        .v-card h3 { margin: 0; font-size: 2rem; }
        .v-card.selected { border-color: var(--primary); background: #f0fff4; }

        /* Days Selection Box */
        .days-box { background: #eef7ff; border: 2px solid #3498db; padding: 20px; border-radius: 15px; margin-top: 25px; display: flex; align-items: center; justify-content: space-between; }
        .days-box input { width: 80px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 1.1rem; text-align: center; }

        .addon-box { background: #fff9e6; border: 2px dashed var(--gold); padding: 18px; border-radius: 15px; display: flex; align-items: center; justify-content: space-between; margin-top: 20px; }

        /* Total Box */
        .total-box { margin-top: 30px; padding: 25px; border-radius: 15px; background: var(--secondary); color: white; display: none; }
        .price-line { display: flex; justify-content: space-between; margin: 8px 0; font-size: 1rem; }
        .bonus-text { color: var(--gold); font-weight: bold; }
        .grand-total { font-size: 1.8rem; font-weight: 700; color: #2ecc71; border-top: 1px solid #444; padding-top: 10px; margin-top: 10px; }

        /* Payment Modal Styling */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; overflow-y:auto; }
        .modal-content { max-width:550px; margin:40px auto; background:white; padding:30px; border-radius:20px; position:relative; }

        /* Payment Method Tabs */
        .payment-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab-btn { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 10px; cursor: pointer; background: #f8f9fa; font-weight: 600; text-align: center; transition: 0.3s; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: 0.3s; margin-top: 20px; text-transform: uppercase; }
        .btn-calc { background: var(--accent); color: white; }
        .btn-checkout { background: var(--primary); color: white; display: none; }

        input[type="text"], input[type="number"], input[type="tel"] { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        .card-row { display: flex; gap: 10px; }
    </style>
</head>
<body>

<header>
    <h1>SRI LANKA TOUR PLANNER</h1>
    <p>Select Cities & Book Your Ride Online</p>
</header>

<div class="container">
    <h2>1. Where do you want to go?</h2>
    <div class="grid">
        <div class="item" onclick="toggleCity('Colombo', this)"><img src="download (8).jpg"><p>Colombo</p></div>
        <div class="item" onclick="toggleCity('Kandy', this)"><img src="download (6).jpg"><p>Kandy</p></div>
        <div class="item" onclick="toggleCity('Nuwara Eliya', this)"><img src="download (2).jpg"><p>Nuwara Eliya</p></div>
        <div class="item" onclick="toggleCity('Galle', this)"><img src="download (1).jpg"><p>Galle</p></div>
        <div class="item" onclick="toggleCity('Badulla', this)"><img src="download (3).jpg"><p>Badulla</p></div>
        <div class="item" onclick="toggleCity('Ampara', this)"><img src="download (5).jpg"><p>Ampara</p></div>
        <div class="item" onclick="toggleCity('Jaffna', this)"><img src="download (7).jpg"><p>Jaffna</p></div>
        <div class="item" onclick="toggleCity('Matale', this)"><img src="download (4).jpg"><p>Matale</p></div>
        <div class="item" onclick="toggleCity('Anuradapura', this)"><img src="download (9).jpg"><p>Anuradapura</p></div>
        <div class="item" onclick="toggleCity('Matara', this)"><img src="download (4).jpg"><p>Matara</p></div>
    </div>

    <h2>2. Choose Vehicle & Days</h2>
    <div class="vehicle-select">
        <div class="v-card" id="v-bike" onclick="selectVehicle('Motorbike', 2500, 'v-bike')"><h3>üèçÔ∏è</h3><p>Motorbike<br>Rs. 2500/day</p></div>
        <div class="v-card" id="v-car" onclick="selectVehicle('Car', 6000, 'v-car')"><h3>üöó</h3><p>Car <br>Rs. 6000/day</p></div>
        <div class="v-card" id="v-van" onclick="selectVehicle('Van', 12000, 'v-van')"><h3>üöê</h3><p>Luxury Van<br>Rs. 12000/day</p></div>
    </div>

    <div class="days-box">
        <div><strong>Total Days:</strong></div>
        <input type="number" id="tour-days" value="1" min="1" onchange="resetView()">
    </div>

    <div class="addon-box">
        <span><strong>Add a Tour Guide?</strong> (+ Rs. 3500/day)</span>
        <input type="checkbox" id="guide-check" onchange="resetView()" style="width:24px; height:24px;">
    </div>

    <button class="btn btn-calc" onclick="calculateTotal()">Calculate Final Price</button>

    <div class="total-box" id="total-display">
        <div class="price-line"><span>Selected Cities:</span> <span id="disp-cities">None</span></div>
        <div class="price-line"><span>Transport (<span id="disp-days">1</span> Days):</span> <span id="v-val">0</span></div>
        <div class="price-line"><span>Guide Service:</span> <span id="guide-val">0</span></div>
        <div class="price-line bonus-text"><span>Special 5% Discount Applied:</span> <span id="bonus-val">0</span></div>
        <div class="grand-total">Total Amount: Rs. <span id="grand-val">0</span></div>
    </div>

    <button class="btn btn-checkout" id="checkout-btn" onclick="showPaymentModal()">Proceed to Payment</button>
</div>

<div id="payment-modal" class="modal">
    <div class="modal-content">
        <span onclick="closeModal()" style="position:absolute; right:20px; top:15px; cursor:pointer; font-size:24px;">&times;</span>
        <h2 style="text-align:center;">Secure Checkout</h2>
        <p style="text-align:center; font-weight:bold; color:var(--primary);">Amount Payable: Rs. <span id="modal-amount">0</span></p>
        
        <div class="payment-tabs">
            <div id="tab-bank" class="tab-btn active" onclick="switchTab('bank')">Bank Transfer</div>
            <div id="tab-online" class="tab-btn" onclick="switchTab('online')">Online Card Payment</div>
        </div>

        <div id="bank-section">
            <div style="background:#f8f9fa; padding:15px; border-radius:10px; margin-bottom:15px; border:1px solid #ddd; font-size: 0.9rem;">
                <p><strong>Bank:</strong> Bank of Ceylon (BOC)</p>
                <p><strong>Account Name:</strong> Sri Lanka Travels (PVT) LTD</p>
                <p><strong>Account Number:</strong> 123456789</p>
                <p><strong>Branch:</strong> Kandy Main</p>
            </div>
            <form onsubmit="confirmBooking(event, 'Bank Transfer')">
                <input type="text" placeholder="Your Name" required>
                <input type="tel" placeholder="WhatsApp Number" required>
                <label style="display:block; margin-bottom:5px; font-weight:600; font-size: 0.85rem;">Upload Payment Receipt:</label>
                <input type="file" accept="image/*" required style="margin-bottom:15px;">
                <button type="submit" class="btn" style="background:var(--primary); color:white; margin:0;">Submit Receipt</button>
            </form>
        </div>

        <div id="online-section" style="display:none;">
            <form onsubmit="confirmBooking(event, 'Online Card')">
                <input type="text" placeholder="Name on Card" required>
                <input type="text" placeholder="Card Number (XXXX XXXX XXXX XXXX)" maxlength="16" required>
                <div class="card-row">
                    <input type="text" placeholder="MM/YY" maxlength="5" required>
                    <input type="password" placeholder="CVV" maxlength="3" required>
                </div>
                <div style="text-align:center; margin-bottom:10px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Visa_Inc._logo.svg/2560px-Visa_Inc._logo.svg.png" width="40" style="margin-right:10px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1280px-Mastercard-logo.svg.png" width="40">
                </div>
                <button type="submit" class="btn" style="background:var(--primary); color:white; margin:0;">Pay Now</button>
            </form>
        </div>
    </div>
</div>

<script>
    let selectedCities = [];
    let vehicle = { name: "", price: 0 };

    function toggleCity(name, el) {
        const index = selectedCities.indexOf(name);
        if (index > -1) {
            selectedCities.splice(index, 1);
            el.classList.remove('selected');
        } else {
            selectedCities.push(name);
            el.classList.add('selected');
        }
        resetView();
    }

    function selectVehicle(name, price, id) {
        document.querySelectorAll('.v-card').forEach(c => c.classList.remove('selected'));
        document.getElementById(id).classList.add('selected');
        vehicle = { name, price };
        resetView();
    }

    function resetView() {
        document.getElementById('total-display').style.display = 'none';
        document.getElementById('checkout-btn').style.display = 'none';
    }

    function calculateTotal() {
        const days = parseInt(document.getElementById('tour-days').value);
        if (selectedCities.length === 0 || vehicle.price === 0 || days < 1) {
            alert("Please select at least one city, a vehicle and valid days!");
            return;
        }

        const guideRate = document.getElementById('guide-check').checked ? 3500 : 0;
        const subtotal = (vehicle.price * days) + (guideRate * days);
        const bonus = subtotal * 0.05;
        const finalPrice = subtotal - bonus;

        document.getElementById('disp-cities').innerText = selectedCities.join(', ');
        document.getElementById('v-val').innerText = (vehicle.price * days);
        document.getElementById('guide-val').innerText = (guideRate * days);
        document.getElementById('disp-days').innerText = days;
        document.getElementById('bonus-val').innerText = "-" + bonus.toFixed(0);
        document.getElementById('grand-val').innerText = finalPrice.toFixed(0);

        document.getElementById('total-display').style.display = 'block';
        document.getElementById('checkout-btn').style.display = 'block';
    }

    function showPaymentModal() {
        const amt = document.getElementById('grand-val').innerText;
        document.getElementById('modal-amount').innerText = amt;
        document.getElementById('payment-modal').style.display = 'block';
    }

    function switchTab(type) {
        const bankTab = document.getElementById('tab-bank');
        const onlineTab = document.getElementById('tab-online');
        const bankSection = document.getElementById('bank-section');
        const onlineSection = document.getElementById('online-section');

        if (type === 'bank') {
            bankTab.classList.add('active');
            onlineTab.classList.remove('active');
            bankSection.style.display = 'block';
            onlineSection.style.display = 'none';
        } else {
            onlineTab.classList.add('active');
            bankTab.classList.remove('active');
            onlineSection.style.display = 'block';
            bankSection.style.display = 'none';
        }
    }

    function closeModal() {
        document.getElementById('payment-modal').style.display = 'none';
    }

    function confirmBooking(e, method) {
        e.preventDefault();
        const amt = document.getElementById('grand-val').innerText;
        alert(`Payment Successful via ${method}!\nTotal: Rs. ${amt}\nOur team will contact you on WhatsApp soon.`);
        closeModal();
        location.reload(); // Reload to clear the form
    }
</script>

</body>
</html>